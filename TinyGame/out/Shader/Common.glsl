#pragma once

#define COMPILER_GLSL 1

#ifndef COMPILER_GLSL
#define COMPILER_GLSL 0
#endif

#ifndef COMPILER_HLSL
#define COMPILER_HLSL 0
#endif

#ifndef VERTEX_SHADER
#define VERTEX_SHADER 0
#endif

#ifndef PIXEL_SHADER
#define PIXEL_SHADER 0
#endif

#ifndef GEOMETRY_SHADER
#define GEOMETRY_SHADER 0
#endif

#ifndef HULL_SHADER
#define HULL_SHADER 0
#endif

#ifndef DOMAIN_SHADER
#define DOMAIN_SHADER 0
#endif

#ifndef COMPUTE_SHADER
#define COMPUTE_SHADER 0
#endif

#define UNROLL
#define LOOP

#define BRANCH
#define FLATTEN

#define ATTRIBUTE0 0
#define ATTRIBUTE1 1
#define ATTRIBUTE2 2
#define ATTRIBUTE3 3
#define ATTRIBUTE4 4
#define ATTRIBUTE5 5
#define ATTRIBUTE6 6
#define ATTRIBUTE7 7
#define ATTRIBUTE8 8 
#define ATTRIBUTE9 9
#define ATTRIBUTE10 10
#define ATTRIBUTE11 11
#define ATTRIBUTE12 12
#define ATTRIBUTE13 13
#define ATTRIBUTE14 14
#define ATTRIBUTE15 15

#define ATTRIBUTE_POSITION ATTRIBUTE0
#define ATTRIBUTE_TANGENT ATTRIBUTE15
#define ATTRIBUTE_NORMAL ATTRIBUTE2
#define ATTRIBUTE_COLOR ATTRIBUTE3
#define ATTRIBUTE_TEXCOORD ATTRIBUTE8
#define ATTRIBUTE_TEXCOORD1 ATTRIBUTE9
#define ATTRIBUTE_TEXCOORD2 ATTRIBUTE10
#define ATTRIBUTE_TEXCOORD3 ATTRIBUTE11
#define ATTRIBUTE_TEXCOORD4 ATTRIBUTE12
#define ATTRIBUTE_TEXCOORD5 ATTRIBUTE13
#define ATTRIBUTE_TEXCOORD6 ATTRIBUTE14
//#define ATTRIBUTE_TEXCOORD7 ATTRIBUTE15

#define PI 3.1415926535897932
#define VECTOR_FUNCTION_LIST( NAME )\
	NAME( float )\
	NAME( float2 )\
	NAME( float3 )\
	NAME( float4 )
#define DEFINE_FUNCTION_INNER( TYPE , NAME , CODE ) TYPE NAME( TYPE x ) CODE
#define DEFINE_VECTOR_FUNCTION( NAME , CODE )\
	DEFINE_FUNCTION_INNER( float2 , NAME , CODE )\
	DEFINE_FUNCTION_INNER( float3 , NAME , CODE )\
	DEFINE_FUNCTION_INNER( float4 , NAME , CODE )

#if COMPILER_GLSL
#include "GLSLCommon.glsl"
#elif COMPILER_HLSL
#endif

float Square(float x){ return x * x; }
DEFINE_VECTOR_FUNCTION(Square, { return x * x; })
float Pow3(float x){ return x * x * x; }
DEFINE_VECTOR_FUNCTION(Pow3, { return x * x * x; })

#define TPow4( TYPE )\
	TYPE Pow4( TYPE x )\
	{\
		TYPE x2 = x*x;\
		return x2 * x2;\
	}
VECTOR_FUNCTION_LIST(TPow4)
#undef TPow4

#define TPow5( TYPE )\
	TYPE Pow5( TYPE x )\
	{\
		TYPE x2 = x*x;\
		return x2 * x2 * x;\
	}
VECTOR_FUNCTION_LIST(TPow5)
#undef TPow5

#undef VECTOR_FUNCTION_LIST
#undef DEFINE_FUNCTION_INNER
#undef DEFINE_VECTOR_FUNCTION